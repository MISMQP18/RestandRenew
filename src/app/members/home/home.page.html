<ion-header>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-button (click)="logout()">
                <ion-icon slot="icon-only" name="log-out"></ion-icon>
            </ion-button>
        </ion-buttons>
        <ion-title>Habit Tracker</ion-title>
        <ion-buttons slot="end">
            <ion-button href="http://wpi.qualtrics.com/jfe/form/SV_8wCVNUzfr8zUMdL">
                <ion-icon slot="icon-only" name="create"></ion-icon>
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content color="primary" padding>
    <ion-item-group>
        <ion-item>
            <ion-label extend="block" style="text-align: center">Welcome Back!<br>Today's Date: {{formattedDate}}</ion-label>
        </ion-item>
    </ion-item-group>

    <ion-grid>
        <ion-row>
            <ion-col>
                <ion-button (click)=goPreviousWeek() expand="block" fill="solid" size="small" style="text-align: left">
                    <ion-icon name="arrow-back" style="zoom:1.5"></ion-icon>
                     Previous Week
                </ion-button>
            </ion-col>
            <ion-col>
                <ion-button (click)=goNextWeek() expand="block" fill="solid" size="small" style="text-align: right">
                    Next Week
                    <ion-icon name="arrow-forward" style="zoom:1.5"></ion-icon>
                </ion-button>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col>
                <ion-button *ngIf="(!(sundayIncompleteHabits.length == 0) && (this.matchDate == 0))" expand="block" fill="outline" size="small" color="light">Su</ion-button>
                <ion-button *ngIf="(!(sundayIncompleteHabits.length == 0) && !(this.matchDate == 0))" expand="block" fill="solid" size="small" color="light">Su</ion-button>
                <ion-button *ngIf="((sundayIncompleteHabits.length == 0) && !(this.matchDate == 0))" expand="block" fill="solid" size="small" color="success">Su</ion-button>
                <ion-button *ngIf="((sundayIncompleteHabits.length == 0) && (this.matchDate == 0))" expand="block" fill="outline" size="small" color="success">Su</ion-button>
            </ion-col>
            <ion-col>
                <ion-button *ngIf="(!(mondayIncompleteHabits.length == 0) && (this.matchDate == 1))" expand="block" fill="outline" size="small" color="light">M</ion-button>
                <ion-button *ngIf="(!(mondayIncompleteHabits.length == 0) && !(this.matchDate == 1))" expand="block" fill="solid" size="small" color="light">M</ion-button>
                <ion-button *ngIf="((mondayIncompleteHabits.length == 0) && !(this.matchDate == 1))" expand="block" fill="solid" size="small" color="success">M</ion-button>
                <ion-button *ngIf="((mondayIncompleteHabits.length == 0) && (this.matchDate == 1))" expand="block" fill="outline" size="small" color="success">M</ion-button>
            </ion-col>
            <ion-col>
                <ion-button *ngIf="(!(tuesdayIncompleteHabits.length == 0) && (this.matchDate == 2))" expand="block" fill="outline" size="small" color="light">T</ion-button>
                <ion-button *ngIf="(!(tuesdayIncompleteHabits.length == 0) && !(this.matchDate == 2))" expand="block" fill="solid" size="small" color="light">T</ion-button>
                <ion-button *ngIf="((tuesdayIncompleteHabits.length == 0) && !(this.matchDate == 2))" expand="block" fill="solid" size="small" color="success">T</ion-button>
                <ion-button *ngIf="((tuesdayIncompleteHabits.length == 0) && (this.matchDate == 2))" expand="block" fill="outline" size="small" color="success">T</ion-button>
            </ion-col>
            <ion-col>
                <ion-button *ngIf="(!(wednesdayIncompleteHabits.length == 0) && (this.matchDate == 3))" expand="block" fill="outline" size="small" color="light">W</ion-button>
                <ion-button *ngIf="(!(wednesdayIncompleteHabits.length == 0) && !(this.matchDate == 3))" expand="block" fill="solid" size="small" color="light">W</ion-button>
                <ion-button *ngIf="((wednesdayIncompleteHabits.length == 0) && !(this.matchDate == 3))" expand="block" fill="solid" size="small" color="success">W</ion-button>
                <ion-button *ngIf="((wednesdayIncompleteHabits.length == 0) && (this.matchDate == 3))" expand="block" fill="outline" size="small" color="success">W</ion-button>
            </ion-col>
            <ion-col>
                <ion-button *ngIf="(!(thursdayIncompleteHabits.length == 0) && (this.matchDate == 4))" expand="block" fill="outline" size="small" color="light">Th</ion-button>
                <ion-button *ngIf="(!(thursdayIncompleteHabits.length == 0) && !(this.matchDate == 4))" expand="block" fill="solid" size="small" color="light">Th</ion-button>
                <ion-button *ngIf="((thursdayIncompleteHabits.length == 0) && !(this.matchDate == 4))" expand="block" fill="solid" size="small" color="success">Th</ion-button>
                <ion-button *ngIf="((thursdayIncompleteHabits.length == 0) && (this.matchDate == 4))" expand="block" fill="outline" size="small" color="success">Th</ion-button>
            </ion-col>
            <ion-col>
                <ion-button *ngIf="(!(fridayIncompleteHabits.length == 0) && (this.matchDate == 5))" expand="block" fill="outline" size="small" color="light">F</ion-button>
                <ion-button *ngIf="(!(fridayIncompleteHabits.length == 0) && !(this.matchDate == 5))" expand="block" fill="solid" size="small" color="light">F</ion-button>
                <ion-button *ngIf="((fridayIncompleteHabits.length == 0) && !(this.matchDate == 5))" expand="block" fill="solid" size="small" color="success">F</ion-button>
                <ion-button *ngIf="((fridayIncompleteHabits.length == 0) && (this.matchDate == 5))" expand="block" fill="outline" size="small" color="success">F</ion-button>
            </ion-col>
            <ion-col>
                <ion-button *ngIf="(!(saturdayIncompleteHabits.length == 0) && (this.matchDate == 6))" expand="block" fill="outline" size="small" color="light">Sa</ion-button>
                <ion-button *ngIf="(!(saturdayIncompleteHabits.length == 0) && !(this.matchDate == 6))" expand="block" fill="solid" size="small" color="light">Sa</ion-button>
                <ion-button *ngIf="((saturdayIncompleteHabits.length == 0) && !(this.matchDate == 6))" expand="block" fill="solid" size="small" color="success">Sa</ion-button>
                <ion-button *ngIf="((saturdayIncompleteHabits.length == 0) && (this.matchDate == 6))" expand="block" fill="outline" size="small" color="success">Sa</ion-button>
            </ion-col>
        </ion-row>
    </ion-grid>

    <ion-fab vertical="bottom" horizontal="end" slot="fixed">
        <ion-fab-button (click)="openAddHabitPage()">
            <ion-icon name="add" style="zoom:2.0"></ion-icon>
        </ion-fab-button>
    </ion-fab>

    <!--<ion-card>
        <ion-card-header color="light">Today's Habits</ion-card-header>

        <ng-container *ngIf="!habits || habits.length == 0">
            <div *ngFor="let n of [0,1,2]" padding>
                <ion-skeleton-text></ion-skeleton-text>
                <p>
                    <ion-skeleton-text class="fake-skeleton"></ion-skeleton-text>
                </p>
            </div>
        </ng-container>

        <ion-item-sliding *ngFor="let item of habits">
            <ion-item *ngIf="item.incomplete && item.on && checkDay(item)" lines="inset" button [routerLink]="['/edit', item.id]">
                <ion-label>
                    {{ item.name }}
                </ion-label>
                <ion-note slot="end" color="primary">{{ item.time }}</ion-note>
            </ion-item>

            <ion-item-options side="end">
                <ion-item-option (click)="hideHabit(item)" color="secondary">
                    Complete
                    <ion-icon name="checkmark-circle" slot="end"></ion-icon>
                </ion-item-option>
            </ion-item-options>
        </ion-item-sliding>

    </ion-card>-->

    <p></p>

    <ion-card>
        <ion-card-header color="light">Today's Habits</ion-card-header>

        <ng-container *ngIf="!habits || habits.length == 0">
            <div *ngFor="let n of [0,1,2]" padding>
                <ion-skeleton-text></ion-skeleton-text>
                <p>
                    <ion-skeleton-text class="fake-skeleton"></ion-skeleton-text>
                </p>
            </div>
        </ng-container>

        <ion-item-sliding *ngFor="let item of habitListQuery()">
            <ion-item *ngIf="item.incomplete && item.on && checkDay(item)" lines="inset" button [routerLink]="['/edit', item.id]">
                <ion-label>
                    {{ item.name }}
                </ion-label>
                <ion-note slot="end" color="primary">{{ item.time }}</ion-note>
            </ion-item>

            <ion-item-options side="end">
                <ion-item-option (click)="hideHabit(item)" color="secondary">
                    Complete
                    <ion-icon name="checkmark-circle" slot="end"></ion-icon>
                </ion-item-option>
            </ion-item-options>
        </ion-item-sliding>

    </ion-card>


</ion-content>

<!-- original button design --

    <ion-item-group>
        <ion-button expand="block" fill="solid" (click)="toggleNamedColor(); btnClicked()" [color]="ionicNamedColor">Drink Water</ion-button>
        <p></p>
        <ion-button expand="block" fill="solid" (click)="toggleNamedColor2(); btnClicked()" [color]="ionicNamedColor2">Take a Walk</ion-button>
        <p></p>
        <ion-button expand="block" fill="solid" (click)="toggleNamedColor3(); btnClicked()" [color]="ionicNamedColor3">Deep Breath</ion-button>
    </ion-item-group>

-->